# üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–∞–º—è—Ç–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

## –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞–º—è—Ç–∏

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ–π –ø–∞–º—è—Ç–∏

```bash
ssh rocketcloud-vps "free -h"
```

### 2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ htop –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞

#### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ htop (–µ—Å–ª–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)

```bash
ssh rocketcloud-vps "apt update && apt install -y htop"
```

#### –ó–∞–ø—É—Å–∫ htop

```bash
ssh rocketcloud-vps "htop"
```

**–ò–ª–∏ –≤ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–º —Ä–µ–∂–∏–º–µ:**
```bash
ssh -t rocketcloud-vps htop
```

#### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ htop:

- `F5` - –î–µ—Ä–µ–≤–æ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–µ –ø—Ä–æ—Ü–µ—Å—Å—ã)
- `F6` - –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ (–≤—ã–±–µ—Ä–∏—Ç–µ `PERCENT_MEM` –¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –ø–æ –ø–∞–º—è—Ç–∏)
- `F10` –∏–ª–∏ `q` - –í—ã—Ö–æ–¥
- `t` - –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É —Ä–µ–∂–∏–º–∞–º–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
- `H` - –ü–æ–∫–∞–∑–∞—Ç—å/—Å–∫—Ä—ã—Ç—å –ø–æ—Ç–æ–∫–∏
- `K` - –£–±–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å (Enter –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è)
- `Space` - –û—Ç–º–µ—Ç–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å
- `/` - –ü–æ–∏—Å–∫ –ø—Ä–æ—Ü–µ—Å—Å–∞

### 3. –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã (–µ—Å–ª–∏ htop –Ω–µ—Ç)

#### –¢–æ–ø –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –ø–æ –ø–∞–º—è—Ç–∏:

```bash
ssh rocketcloud-vps "ps aux --sort=-%mem | head -20"
```

#### –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–∞–º—è—Ç–∏:

```bash
ssh rocketcloud-vps "cat /proc/meminfo | grep -E 'MemTotal|MemFree|MemAvailable|Buffers|Cached|SwapTotal|SwapFree'"
```

#### –ü—Ä–æ—Ü–µ—Å—Å—ã —Å –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π:

```bash
ssh rocketcloud-vps "ps aux --sort=-%mem --width=200 | head -15"
```

#### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏ –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º:

```bash
ssh rocketcloud-vps "ps aux | awk '{print \$1, \$4, \$11}' | sort -k2 -rn | head -20"
```

#### Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è):

```bash
ssh rocketcloud-vps "docker stats --no-stream"
```

### 4. –°–∫—Ä–∏–ø—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `check_memory.sh` –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:

```bash
#!/bin/bash
echo "=== Memory Usage Report ==="
echo ""
echo "1. System Memory:"
free -h
echo ""
echo "2. Top 10 processes by memory:"
ps aux --sort=-%mem --width=200 | head -11
echo ""
echo "3. Memory details:"
cat /proc/meminfo | grep -E 'MemTotal|MemFree|MemAvailable|Buffers|Cached|SwapTotal|SwapFree|Shmem'
echo ""
echo "4. Processes by user:"
ps aux | awk '{arr[\$1]+=\$4} END {for (i in arr) print i, arr[i]"%"}'
echo ""
echo "5. System load:"
uptime
echo ""
echo "6. Disk usage:"
df -h
```

–ó–∞–ø—É—Å–∫:
```bash
ssh rocketcloud-vps "bash -s" < check_memory.sh
```

–ò–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:
```bash
ssh rocketcloud-vps
nano /root/check_memory.sh
# –í—Å—Ç–∞–≤—å—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å–∫—Ä–∏–ø—Ç–∞
chmod +x /root/check_memory.sh
/root/check_memory.sh
```

### 5. –¢–∏–ø–∏—á–Ω—ã–µ "–ø–æ–∂–∏—Ä–∞—Ç–µ–ª–∏" –ø–∞–º—è—Ç–∏

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤:

```bash
# –°–∏—Å—Ç–µ–º–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã
ssh rocketcloud-vps "systemctl list-units --type=service --state=running | grep -E 'postgres|mysql|redis|nginx|apache|docker'"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
ssh rocketcloud-vps "systemctl status postgresql"
ssh rocketcloud-vps "systemctl status redis"
ssh rocketcloud-vps "systemctl status docker"

# –ü—Ä–æ—Ü–µ—Å—Å—ã Python
ssh rocketcloud-vps "ps aux | grep python"

# –ü—Ä–æ—Ü–µ—Å—Å—ã Node.js
ssh rocketcloud-vps "ps aux | grep node"

# –ë–æ–ª—å—à–∏–µ —Ñ–∞–π–ª—ã –≤ –ø–∞–º—è—Ç–∏
ssh rocketcloud-vps "lsof | grep -E 'REG.*[0-9]+G'"
```

### 6. –û—á–∏—Å—Ç–∫–∞ –ø–∞–º—è—Ç–∏

#### –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞:

```bash
ssh rocketcloud-vps "sync && echo 3 > /proc/sys/vm/drop_caches"
```

#### –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤:

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Ä–≤–∏—Å–æ–≤
ssh rocketcloud-vps "systemctl list-units --type=service --state=running"

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä–≤–∏—Å–∞ (–±—É–¥—å—Ç–µ –æ—Å—Ç–æ—Ä–æ–∂–Ω—ã!)
# ssh rocketcloud-vps "systemctl stop –∏–º—è_—Å–µ—Ä–≤–∏—Å–∞"
```

#### –û—á–∏—Å—Ç–∫–∞ –ª–æ–≥–æ–≤:

```bash
ssh rocketcloud-vps "journalctl --vacuum-time=1d"
```

### 7. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

#### Watch –∫–æ–º–∞–Ω–¥–∞ (–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 2 —Å–µ–∫—É–Ω–¥—ã):

```bash
ssh -t rocketcloud-vps "watch -n 2 'free -h && echo && ps aux --sort=-%mem | head -10'"
```

#### Top –∫–æ–º–∞–Ω–¥–∞:

```bash
ssh -t rocketcloud-vps top
```

–ù–∞–∂–º–∏—Ç–µ `M` –¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –ø–æ –ø–∞–º—è—Ç–∏, `q` –¥–ª—è –≤—ã—Ö–æ–¥–∞.

---

## üìä –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### free -h:
- `MemTotal` - –û–±—â–∞—è –ø–∞–º—è—Ç—å
- `MemFree` - –°–≤–æ–±–æ–¥–Ω–∞—è –ø–∞–º—è—Ç—å
- `MemAvailable` - –î–æ—Å—Ç—É–ø–Ω–∞—è –ø–∞–º—è—Ç—å (—Å–∞–º–æ–µ –≤–∞–∂–Ω–æ–µ!)
- `Buffers` - –ë—É—Ñ–µ—Ä—ã
- `Cached` - –ö—ç—à
- `SwapTotal` - –û–±—â–∏–π swap
- `SwapFree` - –°–≤–æ–±–æ–¥–Ω—ã–π swap

**–í–∞–∂–Ω–æ:** `MemAvailable` - —ç—Ç–æ —Ä–µ–∞–ª—å–Ω–∞—è –¥–æ—Å—Ç—É–ø–Ω–∞—è –ø–∞–º—è—Ç—å –¥–ª—è –Ω–æ–≤—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤.

### ps aux:
- `%MEM` - –ü—Ä–æ—Ü–µ–Ω—Ç –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–π –ø–∞–º—è—Ç–∏
- `VSZ` - –í–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è –ø–∞–º—è—Ç—å
- `RSS` - –†–µ–∞–ª—å–Ω–∞—è –ø–∞–º—è—Ç—å (Resident Set Size)
- `STAT` - –°—Ç–∞—Ç—É—Å –ø—Ä–æ—Ü–µ—Å—Å–∞

---

## üîß –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–ï—Å–ª–∏ –ø–∞–º—è—Ç—å –∑–∞–ø–æ–ª–Ω–µ–Ω–∞ —Å–∏—Å—Ç–µ–º–Ω—ã–º–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏:**
   - –°–æ–∑–¥–∞–π—Ç–µ swap —Ñ–∞–π–ª (2-4 GB)
   - –†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ RAM —Å–µ—Ä–≤–µ—Ä–∞

2. **–ï—Å–ª–∏ –ø–∞–º—è—Ç—å –∑–∞–ø–æ–ª–Ω–µ–Ω–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏:**
   - –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Å–µ—Ä–≤–∏—Å—ã
   - –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ swap —Ñ–∞–π–ª

3. **–ï—Å–ª–∏ –ø–∞–º—è—Ç—å –∑–∞–ø–æ–ª–Ω–µ–Ω–∞ –∫—ç—à–µ–º:**
   - –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ (Linux –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–≤–æ–±–æ–¥–Ω—É—é –ø–∞–º—è—Ç—å –¥–ª—è –∫—ç—à–∞)
   - –ö—ç—à –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
   - –ú–æ–∂–Ω–æ –æ—á–∏—Å—Ç–∏—Ç—å: `sync && echo 3 > /proc/sys/vm/drop_caches`

---

## üöÄ –ë—ã—Å—Ç—Ä–∞—è –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

```bash
ssh rocketcloud-vps "echo '=== Memory ===' && free -h && echo && echo '=== Top Processes ===' && ps aux --sort=-%mem | head -11 && echo && echo '=== Swap ===' && swapon --show"
```

