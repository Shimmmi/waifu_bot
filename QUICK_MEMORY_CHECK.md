# üîç –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞–º—è—Ç–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

## –°–ø–æ—Å–æ–± 1: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ htop (–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ)

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ htop (–µ—Å–ª–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω):

```bash
ssh rocketcloud-vps "apt update && apt install -y htop"
```

### –ó–∞–ø—É—Å–∫ htop:

```bash
ssh -t rocketcloud-vps htop
```

**–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤ htop:**
- `F6` ‚Üí –≤—ã–±–µ—Ä–∏—Ç–µ `PERCENT_MEM` - —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –ø–∞–º—è—Ç–∏
- `F5` - –¥–µ—Ä–µ–≤–æ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–µ –ø—Ä–æ—Ü–µ—Å—Å—ã)
- `M` - —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –ø–∞–º—è—Ç–∏
- `P` - —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ CPU
- `t` - –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ä–µ–∂–∏–º–æ–≤ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
- `q` - –≤—ã—Ö–æ–¥

---

## –°–ø–æ—Å–æ–± 2: –ë—ã—Å—Ç—Ä—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –¢–æ–ø –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –ø–æ –ø–∞–º—è—Ç–∏:

```bash
ssh rocketcloud-vps "ps aux --sort=-%mem | head -15"
```

### –ü–∞–º—è—Ç—å –∏ swap:

```bash
ssh rocketcloud-vps "free -h && echo && swapon --show"
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏ –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º:

```bash
ssh rocketcloud-vps "ps aux | awk '{arr[\$1]+=\$4} END {for (i in arr) print i, arr[i]\"%\"}' | sort -k2 -rn"
```

---

## –°–ø–æ—Å–æ–± 3: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

### –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä:

```powershell
# –í PowerShell –Ω–∞ Windows
scp diagnose_memory.sh rocketcloud-vps:/root/diagnose_memory.sh
```

### –ó–∞–ø—É—Å–∫ —Å–∫—Ä–∏–ø—Ç–∞:

```bash
ssh rocketcloud-vps "bash /root/diagnose_memory.sh"
```

**–ò–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç –ø—Ä—è–º–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:**

```bash
ssh rocketcloud-vps
nano /root/diagnose_memory.sh
# –í—Å—Ç–∞–≤—å—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ diagnose_memory.sh
chmod +x /root/diagnose_memory.sh
/root/diagnose_memory.sh
```

---

## –°–ø–æ—Å–æ–± 4: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

### Watch (–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 2 —Å–µ–∫—É–Ω–¥—ã):

```bash
ssh -t rocketcloud-vps "watch -n 2 'free -h && echo && ps aux --sort=-%mem | head -10'"
```

### Top (–≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è —É—Ç–∏–ª–∏—Ç–∞):

```bash
ssh -t rocketcloud-vps top
```

–í `top` –Ω–∞–∂–º–∏—Ç–µ:
- `M` - —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –ø–∞–º—è—Ç–∏
- `P` - —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ CPU
- `q` - –≤—ã—Ö–æ–¥

---

## üìä –ß—Ç–æ —Å–º–æ—Ç—Ä–µ—Ç—å –≤ –≤—ã–≤–æ–¥–µ

### ps aux:
- **%MEM** - –ø—Ä–æ—Ü–µ–Ω—Ç –ø–∞–º—è—Ç–∏ –æ—Ç –æ–±—â–µ–π (—Å–∞–º–æ–µ –≤–∞–∂–Ω–æ–µ!)
- **RSS** - —Ä–µ–∞–ª—å–Ω–∞—è –ø–∞–º—è—Ç—å –≤ KB
- **VSZ** - –≤–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è –ø–∞–º—è—Ç—å
- **COMMAND** - –∏–º—è –ø—Ä–æ—Ü–µ—Å—Å–∞

### free -h:
- **MemAvailable** - —Ä–µ–∞–ª—å–Ω–æ –¥–æ—Å—Ç—É–ø–Ω–∞—è –ø–∞–º—è—Ç—å –¥–ª—è –Ω–æ–≤—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
- **MemFree** - —Å–≤–æ–±–æ–¥–Ω–∞—è –ø–∞–º—è—Ç—å
- **Swap** - –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω (–º–∏–Ω–∏–º—É–º 2GB)

---

## üîß –¢–∏–ø–∏—á–Ω—ã–µ "–ø–æ–∂–∏—Ä–∞—Ç–µ–ª–∏" –ø–∞–º—è—Ç–∏

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤:

```bash
# PostgreSQL
ssh rocketcloud-vps "ps aux | grep postgres"

# Redis
ssh rocketcloud-vps "ps aux | grep redis"

# Python –ø—Ä–æ—Ü–µ—Å—Å—ã
ssh rocketcloud-vps "ps aux | grep python"

# Node.js –ø—Ä–æ—Ü–µ—Å—Å—ã
ssh rocketcloud-vps "ps aux | grep node"

# Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
ssh rocketcloud-vps "docker stats --no-stream 2>/dev/null || echo 'Docker not running'"
```

### –°–∏—Å—Ç–µ–º–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã:

```bash
ssh rocketcloud-vps "systemctl list-units --type=service --state=running | grep -E 'postgres|mysql|redis|nginx|apache|docker'"
```

---

## ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–ï—Å–ª–∏ –ø–∞–º—è—Ç—å –∑–∞–ø–æ–ª–Ω–µ–Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏:**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –Ω—É–∂–Ω—ã –ª–∏ –æ–Ω–∏
   - –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ: `systemctl stop –∏–º—è_—Å–µ—Ä–≤–∏—Å–∞`

2. **–ï—Å–ª–∏ –ø–∞–º—è—Ç—å –∑–∞–ø–æ–ª–Ω–µ–Ω–∞ –∫—ç—à–µ–º:**
   - –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ (Linux –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–≤–æ–±–æ–¥–Ω—É—é –ø–∞–º—è—Ç—å –¥–ª—è –∫—ç—à–∞)
   - –ö—ç—à –æ—Å–≤–æ–±–æ–∂–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
   - –ú–æ–∂–Ω–æ –æ—á–∏—Å—Ç–∏—Ç—å: `sync && echo 3 > /proc/sys/vm/drop_caches`

3. **–ï—Å–ª–∏ –ø–∞–º—è—Ç–∏ –º–∞–ª–æ –≤ —Ü–µ–ª–æ–º:**
   - **–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Å–æ–∑–¥–∞–π—Ç–µ swap —Ñ–∞–π–ª 2-4 GB**
   - –†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ RAM —Å–µ—Ä–≤–µ—Ä–∞

---

## üöÄ –°–∞–º–∞—è –±—ã—Å—Ç—Ä–∞—è –∫–æ–º–∞–Ω–¥–∞

```bash
ssh rocketcloud-vps "free -h && echo '---' && ps aux --sort=-%mem | head -11"
```

–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–∞–º—è—Ç—å –∏ —Ç–æ–ø-10 –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –ø–∞–º—è—Ç–∏.

